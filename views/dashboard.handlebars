<!-- Loop over each object in the blogPosts array -->
<div class="container-fluid">
  {{#each blogPosts as |blog| }}
  <div class="row m-4 justify-content-center">
    <button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#blog{{blog.id}}">
      <div class="row justify-content-between mt-2">
        <p class="col text-start align-self-center">{{blog.title}}</p> 
        <p class="col text-end align-self-center">Created on {{format_date blog.date_created}}</p>
      </div>
    </button>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="blog{{blog.id}}" tabindex="-1" aria-labelledby="blog{{blog.id}}Label" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="blog{{blog.id}}Label">Update your post</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <form class="blogPost-form">
          <div class="modal-body">
            <div class="mb-3">
              <label for="postTitle{{blog.id}}" class="form-label">Post Title</label>
              <input type="text" class="form-control" id="postTitle{{blog.id}}" value="{{blog.title}}">
            </div>
            <div class="mb-3">
              <label for="postContent{{blog.id}}" class="form-label">Content</label>
              <textarea class="form-control" id="postContent{{blog.id}}" rows="3">{{blog.content}}</textarea>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary deleteButton" data-id={{blog.id}}>Delete</button>
            <button type="button" class="btn btn-primary updateButton" data-id={{blog.id}}>Save changes</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  {{/each}}

  <!-- New Post Button trigger modal -->
  <div class="row justify-content-center mt-3">
    <button type="button" class="btn btn-primary col-sm-4 col-6" data-bs-toggle="modal" data-bs-target="#newPost">
      New Post
    </button>
  </div>
</div>

<!-- New Post Modal -->
<div class="modal fade" id="newPost" tabindex="-1" aria-labelledby="newPostLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="newPostLabel">New Post</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form class="blogPost-form">
        <div class="modal-body">
          <div class="mb-3">
            <label for="postTitle" class="form-label">Post Title</label>
            <input type="text" class="form-control" id="postTitle">
          </div>
          <div class="mb-3">
            <label for="postContent" class="form-label">Content</label>
            <textarea class="form-control" id="postContent" rows="3"></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" id="submitPost" data-bs-dismiss="modal">Create Post</button>
        </div>
      </form>
    </div>
  </div>
</div>

 <!-- JQuery Library -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>


<script src="../js/script.js"></script>
<script src="../js/blogPost.js"></script>

{{#if logged_in}}
  <script src="../js/logout.js"></script>
{{/if}}
